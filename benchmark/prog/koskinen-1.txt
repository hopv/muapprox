let finish = event done; finish

let reduce x r k =
  if x<=0 then k x else r x k

let explore x r =
  event explore
  reduce x r k

let k y = 
  if y<=0 then finish
  else explore y r

let f x k = k (x - 2)

let main() =
  let t = Random.int(0) in
  explore t f